# é¢è¯•åŠ©æ‰‹ - æŠ€æœ¯æ¶æ„æ–‡æ¡£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### æŠ€æœ¯æ ˆ
- **å‰ç«¯ï¼š** Next.js 14 + TypeScript + Tailwind CSS
- **çŠ¶æ€ç®¡ç†ï¼š** Zustand
- **è®¤è¯ï¼š** Supabase Auth (Google OAuth)
- **æ•°æ®åº“ï¼š** Supabase PostgreSQL
- **éŸ³é¢‘å¤„ç†ï¼š** Web Audio API + MediaRecorder
- **AIæœåŠ¡ï¼š** OpenAI Whisper + GPT-4

### éƒ¨ç½²ç¯å¢ƒ
- **å¼€å‘ï¼š** localhost:3000
- **ç”Ÿäº§ï¼š** Vercel (https://interview.cnbu.link)

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”œâ”€â”€ components/             # Reactç»„ä»¶
â”œâ”€â”€ contexts/              # Reactä¸Šä¸‹æ–‡
â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ lib/                   # ç¬¬ä¸‰æ–¹åº“é…ç½®
â”œâ”€â”€ services/              # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ streaming/         # éŸ³é¢‘æµå¤„ç†
â”‚   â”œâ”€â”€ interview-summary/ # AIåˆ†ææœåŠ¡
â”‚   â”œâ”€â”€ storage/          # æ•°æ®å­˜å‚¨æŠ½è±¡å±‚
â”‚   â””â”€â”€ interfaces.ts     # æœåŠ¡æ¥å£å®šä¹‰
â”œâ”€â”€ store/                # ZustandçŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
```

## ğŸ”§ æ ¸å¿ƒæœåŠ¡æ¶æ„

### éŸ³é¢‘å¤„ç†å±‚
```typescript
// éŸ³é¢‘æµå¤„ç†æœåŠ¡
enhanced-wav-streaming-transcription.ts  // å¤šéŸ³æºéŸ³é¢‘å¤„ç†
wav-streaming-transcription.ts           // åŸºç¡€WAVæµå¤„ç†
whisper-audio.ts                        // Whisper APIé›†æˆ
```

### AIåˆ†æå±‚
```typescript
// AIåˆ†ææœåŠ¡
gpt4-summary-service.ts           // GPT-4é¢è¯•æ€»ç»“
summary-generation-manager.ts    // å¼‚æ­¥ä»»åŠ¡ç®¡ç†
text-chunking.ts                 // å¤§æ–‡æœ¬åˆ†æ®µå¤„ç†
```

### æ•°æ®å­˜å‚¨å±‚ï¼ˆé‡æ„å‰ï¼‰
```typescript
// å•ä¸€å¤§æ–‡ä»¶ï¼ˆé—®é¢˜ï¼‰
supabase-storage.ts  // 966è¡Œï¼Œè¿åæ¶æ„åŸåˆ™
```

### æ•°æ®å­˜å‚¨å±‚ï¼ˆé‡æ„å - ç›®æ ‡æ¶æ„ï¼‰
```typescript
storage/
â”œâ”€â”€ user-profile.service.ts      // ç”¨æˆ·èµ„æ–™ç®¡ç† (~150è¡Œ)
â”œâ”€â”€ interview-session.service.ts // é¢è¯•ä¼šè¯ç®¡ç† (~200è¡Œ)
â”œâ”€â”€ position-template.service.ts // å²—ä½æ¨¡æ¿ç®¡ç† (~100è¡Œ)
â”œâ”€â”€ settings.service.ts          // ç”¨æˆ·è®¾ç½®ç®¡ç† (~50è¡Œ)
â””â”€â”€ index.ts                     // ç»Ÿä¸€å¯¼å‡ºæ¥å£
```

## ğŸ”„ æ¶æ„æ¼”è¿›è®°å½•

### v1.0 å•ä½“æ¶æ„
- æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨å•ä¸ªæœåŠ¡ç±»
- æœ¬åœ°å­˜å‚¨ä¸ºä¸»ï¼ˆIndexedDBï¼‰
- ç®€å•çš„çŠ¶æ€ç®¡ç†

### v2.0 äº‘ç«¯é›†æˆ
- å¼•å…¥Supabaseè®¤è¯å’Œæ•°æ®åº“
- OAuthç¤¾äº¤ç™»å½•
- æ•°æ®äº‘ç«¯åŒæ­¥

### v2.1 æ¶æ„é‡æ„ï¼ˆå½“å‰ï¼‰
**é—®é¢˜è¯†åˆ«ï¼š**
- `supabase-storage.ts`æ–‡ä»¶è¿‡é•¿ï¼ˆ966è¡Œï¼‰
- èŒè´£æ··ä¹±ï¼Œè¿åå•ä¸€èŒè´£åŸåˆ™
- ä¸´æ—¶ç¦ç”¨åŠŸèƒ½çš„æ–¹å¼ä¸ä¼˜é›…

**é‡æ„ç›®æ ‡ï¼š**
- æŒ‰åŠŸèƒ½æ‹†åˆ†æœåŠ¡ç±»
- æ¯ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨500è¡Œä»¥å†…
- ä½¿ç”¨é€‚é…å™¨æ¨¡å¼å¤„ç†åŠŸèƒ½é™çº§
- ä¼˜åŒ–è®¤è¯æµç¨‹

### v3.0 å¾®æœåŠ¡åŒ–ï¼ˆè§„åˆ’ï¼‰
- ç‹¬ç«‹çš„AIåˆ†ææœåŠ¡
- éŸ³é¢‘å¤„ç†æœåŠ¡åˆ†ç¦»
- APIç½‘å…³ç»Ÿä¸€ç®¡ç†

## ğŸ” è®¤è¯æµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·ç‚¹å‡»Googleç™»å½•] --> B[é‡å®šå‘åˆ°Google OAuth]
    B --> C[Googleè®¤è¯æˆåŠŸ]
    C --> D[é‡å®šå‘åˆ°Supabaseå›è°ƒ]
    D --> E[Supabaseå¤„ç†è®¤è¯]
    E --> F[é‡å®šå‘åˆ°åº”ç”¨å›è°ƒ]
    F --> G[åˆ›å»º/æ›´æ–°ç”¨æˆ·Profile]
    G --> H[ç™»å½•å®Œæˆ]
```

## ğŸ—ƒï¸ æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒè¡¨ç»“æ„
```sql
-- ç”¨æˆ·èµ„æ–™è¡¨
user_profiles (
  id, user_id, display_name, avatar_url, 
  settings, created_at, updated_at
)

-- é¢è¯•ä¼šè¯è¡¨  
interview_sessions (
  id, user_id, candidate_name, position,
  status, created_at, updated_at
)

-- è½¬å½•ç‰‡æ®µè¡¨
transcription_segments (
  id, session_id, original_text, translated_text,
  start_time, end_time, created_at
)

-- å²—ä½æ¨¡æ¿è¡¨ï¼ˆæš‚æ—¶ç¦ç”¨ï¼‰
position_templates (
  id, user_id, name, description,
  requirements, evaluation_criteria
)
```

## âš¡ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### éŸ³é¢‘å¤„ç†
- WAVæ ¼å¼ä¼˜åŒ–Whisper APIå…¼å®¹æ€§
- å®æ—¶éŸ³é¢‘è´¨é‡ç›‘æ§
- å¤šéŸ³æºæ··åˆå¤„ç†

### AIå¤„ç†
- è¯­ä¹‰åˆ†æ®µå‡å°‘tokenæ¶ˆè€—
- å¼‚æ­¥ä»»åŠ¡ç®¡ç†
- è¿›åº¦è¿½è¸ªå’Œé”™è¯¯æ¢å¤

### å­˜å‚¨ä¼˜åŒ–
- æ•°æ®å‹ç¼©å’Œå¢é‡åŒæ­¥
- æœ¬åœ°ç¼“å­˜ç­–ç•¥
- RLSè¡Œçº§å®‰å…¨

## ğŸš¨ å·²çŸ¥é—®é¢˜å’ŒæŠ€æœ¯å€ºåŠ¡

1. **position_templatesè¡¨ä¾èµ–é—®é¢˜**
   - è§¦å‘å™¨å‡½æ•°æ‰§è¡Œå¤±è´¥
   - ä¸´æ—¶ç¦ç”¨å½±å“åŠŸèƒ½å®Œæ•´æ€§

2. **æœåŠ¡å±‚æ¶æ„é—®é¢˜**
   - å•æ–‡ä»¶è¿‡é•¿è¿åè§„èŒƒ
   - èŒè´£ä¸æ¸…æ™°

3. **é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€**
   - å„æœåŠ¡é”™è¯¯å¤„ç†æ–¹å¼ä¸ä¸€è‡´
   - ç¼ºä¹ç»Ÿä¸€çš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶

## ğŸ¯ é‡æ„è®¡åˆ’

### é˜¶æ®µ1ï¼šæœåŠ¡æ‹†åˆ†ï¼ˆè¿›è¡Œä¸­ï¼‰
- âœ… åˆ›å»ºæ¶æ„æ–‡æ¡£
- ğŸ”„ æ‹†åˆ†å­˜å‚¨æœåŠ¡
- ğŸ”„ é‡æ„è®¤è¯é€»è¾‘
- ğŸ”„ æ›´æ–°ç±»å‹å®šä¹‰

### é˜¶æ®µ2ï¼šåŠŸèƒ½æ¢å¤
- ğŸ”„ ä¿®å¤position_templatesåŠŸèƒ½
- ğŸ”„ å®ç°ä¼˜é›…é™çº§
- ğŸ”„ æ·»åŠ åŠŸèƒ½å¼€å…³

### é˜¶æ®µ3ï¼šä¼˜åŒ–å®Œå–„
- ğŸ”„ ç»Ÿä¸€é”™è¯¯å¤„ç†
- ğŸ”„ æ€§èƒ½ç›‘æ§
- ğŸ”„ å•å…ƒæµ‹è¯•è¦†ç›–